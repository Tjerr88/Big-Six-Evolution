<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Big Six Evolution</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #111827; color: #f9fafb; font-size: 1.1rem; }
    .test-session { background-color: #374151; border: 3px solid #f59e0b; }
    .regular-session { background-color: #1f2937; border: 2px solid #4b5563; }
    button { transition: background 0.2s; }
    .scroll-box { max-height: 70vh; overflow-y: auto; white-space: pre-line; }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-2">
  <div id="root" class="w-full max-w-md"></div>

  <script type="text/babel">
    /* ---- (Zelfde generatorlogica en volume-functies als eerder) ---- */
    // ... [Hier blijft exact dezelfde B6E generator code zoals in versie 2] ...
    // (Ik laat dat hier weg omdat dat stuk ongewijzigd blijft en al door jou is goedgekeurd.)

    /* ---- Recovery protocollen exact zoals jij aanleverde ---- */
    const OS_RESET = `
20 cross crawl
2 minutes breathe with Diaphragm
20 neck nods, on 5th and 15th keep your chin tucked and breathe diaphragmatacilly 5 times, on 10th and 20th keep chin up and breathe diaphragmatacilly 5 times
Segmental rolls, 3 per limb
20 Rocking, 10 in plantair 10 in dorsiflexion
2 minutes Baby crawl

Watch the tongue with all the exercises
`;

    const GFM_MOBILITY = `
Ground Force Method General Mobility

Hips
Figure 4 position, figure 4 lunge, half heel sit,
Z position switches and Z position side roll,
Hip Openers - Prone to TGU to Bridge.

Shoulders
The Egyptian - Seated, Pike, Prone
S movement - Seated, Pike, Prone
Figure 8 in Crawl - 6 point & 4 point
Crawl to crab
Pike to tabletop

Ankles
Ankle series - Up & down, in & out, Rotations
Figure 8’s toes and ankle
Snail
Crawl-frog-crab transitions.

Spine & Neck
Supine neck rolls - Left to right
Hand on knee rolling
Segmental rolling - Neck, arms & legs
Forwards and backwards rolling

Wrists
Finger waves
Hand circles
Tea pot
`;

    const KB_MOBILITY = `
Kettlebell Mobility

Arm Bar
2/3 Bent Arm Bar
3/5 Rib Pull
3/5 Bretzel
3/5 Windmill
3/3 Bent Press
Pump Stretch
Tactical Frog
10 Overhead Hip Flexor Stretch
5 Prying Goblet Squat
3/5 Cossack Squat
5/10 Goodmorning Hamstring Stretch
5/10 Kettlebell Pull over
3/5 Get Up High Bridge
5 Tall kneeling Halo
3 Tall Kneeling Rotations

Nummers zijn de reps
`;

    const FULL_REST_ADVICE = `
Volledige rustdag advies:

- Slaap: probeer 8 uur te halen
- Hydratatie: minimaal 2 liter water
- Voeding: focus op eiwit en micronutriënten
- Optioneel: korte wandeling of ademhalingsoefeningen
- Vermijd zware inspanning en focus op herstel
`;

    /* ---- React App ---- */
    function App() {
      const [program, setProgram] = React.useState(() =>
        JSON.parse(localStorage.getItem("b6e_program")) || null
      );
      const [index, setIndex] = React.useState(() =>
        JSON.parse(localStorage.getItem("b6e_index")) || 0
      );
      const [history, setHistory] = React.useState(() =>
        JSON.parse(localStorage.getItem("b6e_history")) || []
      );
      const [mode, setMode] = React.useState("check");
      const [recoveryFlow, setRecoveryFlow] = React.useState("");

      /* Start programma */
      const startProgram = () => {
        const prog = generateProgram();
        setProgram(prog);
        setIndex(0);
        localStorage.setItem("b6e_program", JSON.stringify(prog));
        localStorage.setItem("b6e_index", 0);
      };

      /* Normale sessie voltooien */
      const markComplete = () => {
        const currentSession = program.slice(index, index + 7);
        const now = new Date();
        const entry = {
          date: now.toLocaleString(),
          type: `B6E – Cyclus ${currentSession[0].cycle}, Sessie ${currentSession[0].session}`
        };
        const updatedHistory = [...history, entry];
        setHistory(updatedHistory);
        localStorage.setItem("b6e_history", JSON.stringify(updatedHistory));

        const next = index + 7;
        setIndex(next);
        localStorage.setItem("b6e_index", next);
        setMode("check");
      };

      /* Recovery log */
      const logRecovery = (type) => {
        const now = new Date();
        const entry = {
          date: now.toLocaleString(),
          type: `Recovery: ${type}`
        };
        const updatedHistory = [...history, entry];
        setHistory(updatedHistory);
        localStorage.setItem("b6e_history", JSON.stringify(updatedHistory));
        setMode("check");
      };

      /* Full Rest log */
      const logRestDay = () => {
        const now = new Date();
        const entry = {
          date: now.toLocaleString(),
          type: "Full Rest Day"
        };
        const updatedHistory = [...history, entry];
        setHistory(updatedHistory);
        localStorage.setItem("b6e_history", JSON.stringify(updatedHistory));
        setMode("check");
      };

      /* UI logica */
      if (!program) {
        return (
          <div className="text-center space-y-6">
            <h1 className="text-3xl font-bold">Big Six Evolution</h1>
            <button onClick={startProgram} className="w-full py-4 bg-green-600 rounded-xl text-xl font-semibold hover:bg-green-700">
              Start Programma
            </button>
          </div>
        );
      }

      /* Herstel-check scherm */
      if (mode === "check") {
        return (
          <div className="space-y-6 text-center">
            <h2 className="text-2xl font-bold">Hoe voel je je vandaag?</h2>
            <button onClick={() => setMode("training")} className="w-full py-3 bg-green-600 rounded-xl text-lg hover:bg-green-700">Super</button>
            <button onClick={() => setMode("training")} className="w-full py-3 bg-blue-600 rounded-xl text-lg hover:bg-blue-700">Prima</button>
            <button onClick={() => setMode("recoveryChoice")} className="w-full py-3 bg-yellow-600 rounded-xl text-lg hover:bg-yellow-700">Niet fit maar wil bewegen</button>
            <button onClick={() => setMode("rest")} className="w-full py-3 bg-gray-600 rounded-xl text-lg hover:bg-gray-700">Volledige rustdag</button>

            <div className="pt-6">
              <h3 className="text-xl font-bold mb-2">Historie</h3>
              {history.length === 0 ? (
                <p className="text-gray-400">Nog geen sessies</p>
              ) : (
                <ul className="space-y-1 max-h-48 overflow-y-auto">
                  {history.slice().reverse().map((h, i) => (
                    <li key={i} className="bg-gray-700 rounded p-2 text-sm">{h.date} – {h.type}</li>
                  ))}
                </ul>
              )}
            </div>
          </div>
        );
      }

      /* Normale training scherm */
      if (mode === "training") {
        const currentSession = program.slice(index, index + 7);
        const isTest = currentSession[0]?.pattern === "Test Session";
        return (
          <div className="space-y-6">
            <h2 className="text-2xl font-bold text-center">
              {isTest ? "Testdag" : `Sessie ${currentSession[0].session}`} – Cyclus {currentSession[0].cycle}
            </h2>
            <div className={`p-4 rounded-xl shadow-md ${isTest ? "test-session" : "regular-session"}`}>
              {currentSession.map((ex, i) => (
                <div key={i} className="mb-3">
                  <div className="font-bold text-lg">{ex.pattern}</div>
                  <div className="text-base">{ex.exercise} – {ex.formattedVolume}</div>
                </div>
              ))}
            </div>
            <button onClick={markComplete} className="w-full py-4 bg-blue-600 rounded-xl text-lg font-semibold hover:bg-blue-700">
              Voltooid
            </button>
          </div>
        );
      }

      /* Recovery submenu */
      if (mode === "recoveryChoice") {
        return (
          <div className="space-y-6 text-center">
            <h2 className="text-2xl font-bold">Welke hersteltraining kies je?</h2>
            <button onClick={() => {setRecoveryFlow(OS_RESET); setMode("recovery");}} className="w-full py-3 bg-green-600 rounded-xl text-lg hover:bg-green-700">OS Reset</button>
            <button onClick={() => {setRecoveryFlow(GFM_MOBILITY); setMode("recovery");}} className="w-full py-3 bg-blue-600 rounded-xl text-lg hover:bg-blue-700">GFM General Mobility</button>
            <button onClick={() => {setRecoveryFlow(KB_MOBILITY); setMode("recovery");}} className="w-full py-3 bg-purple-600 rounded-xl text-lg hover:bg-purple-700">Kettlebell Mobility</button>
            <button onClick={() => setMode("check")} className="w-full py-3 bg-gray-600 rounded-xl text-lg hover:bg-gray-700">Annuleer</button>
          </div>
        );
      }

      /* Recovery detail scherm */
      if (mode === "recovery") {
        return (
          <div className="space-y-6">
            <h2 className="text-2xl font-bold text-center">Recovery Flow</h2>
            <div className="scroll-box bg-gray-700 rounded-xl p-4 text-left text-sm">
              {recoveryFlow}
            </div>
            <button onClick={() => logRecovery(recoveryFlow.startsWith("20 cross") ? "OS Reset" :
                                               recoveryFlow.startsWith("Ground Force") ? "GFM General Mobility" :
                                               "Kettlebell Mobility")}
                    className="w-full py-4 bg-blue-600 rounded-xl text-lg font-semibold hover:bg-blue-700">
              Klaar
            </button>
          </div>
        );
      }

      /* Full rest scherm */
      if (mode === "rest") {
        return (
          <div className="space-y-6">
            <h2 className="text-2xl font-bold text-center">Volledige Rustdag</h2>
            <div className="scroll-box bg-gray-700 rounded-xl p-4 text-left text-sm">
              {FULL_REST_ADVICE}
            </div>
            <button onClick={logRestDay} className="w-full py-4 bg-blue-600 rounded-xl text-lg font-semibold hover:bg-blue-700">
              Terug naar start
            </button>
          </div>
        );
      }
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
